{"version":3,"sources":["assets/images/footer.jpg","assets/images/hexad-small-logo.png","context/GlobalContext.models.ts","context/GlobalContext.reducer.ts","context/GlobalContext.tsx","components/card/Card.tsx","components/logo/Logo.tsx","components/footer/Footer.tsx","components/header/Header.tsx","service/GameService.ts","containers/MainPage.tsx","App.tsx","index.tsx"],"names":["module","exports","GlobalActionTypes","GlobalContextAction","type","payload","this","initialState","gamesDictionary","ids","reducer","state","action","SET_GAMES","games","map","game","id","reduce","previous","current","RATE_GAME","rating","GlobalContext","React","createContext","GlobalContextProvider","children","initialContext","initialContextState","useReducer","Provider","value","useStyles","makeStyles","theme","root","width","margin","fontFamily","media","height","display","justifyContent","AppCard","props","name","image","useContext","dispatch","classes","Card","className","CardHeader","style","title","CardMedia","CardContent","Rating","size","onChange","event","newValue","Logo","Box","marginBottom","data-testid","alt","src","logo","Footer","backgroundImage","footerImage","alignItems","flexDirection","marginTop","padding","Typography","Header","Fragment","fontSize","marginRight","variant","component","GameService","gameList$","BehaviorSubject","initialGameList","gameList","forEach","randomInt","next","min","max","Math","floor","random","_instance","getInstance","MainPage","context","onDestroy$","Subject","pipe","takeUntil","subscribe","length","sort","firstRating","sortedGames","sortGamesByRating","Container","maxWidth","flexWrap","key","Component","contextType","App","suffleSubject$","shuffleActivated","setState","interval","delayWhen","shuffle","createMuiTheme","typography","CurrentIcon","onClick","stopShuffle","startRandomShuffle","ThemeProvider","CssBaseline","Fab","color","aria-label","position","bottom","right","ReactDOM","render","document","getElementById"],"mappings":"8GAAAA,EAAOC,QAAU,IAA0B,oC,mBCA3CD,EAAOC,QAAU,IAA0B,8C,mtDCsC/BC,E,qOApCCC,EAGX,WAAYC,EAAkBC,GAAuB,yBAF9CD,UAE6C,OAD7CC,aAC6C,EAClDC,KAAKF,KAAOA,EACZE,KAAKD,QAAUA,GAmBNE,EAA+B,CAC1CC,gBAAiB,GACjBC,IAAK,K,SAUKP,K,sBAAAA,E,uBAAAA,M,KC7BL,IAAMQ,EAAU,SACrBC,EACAC,GAEA,OAAQA,EAAOR,MACb,KAAKF,EAAkBW,UACrB,IAAMC,EAAQF,EAAOP,QAErB,OAAO,eACFM,EADL,CAEEF,IAAKK,EAAMC,KAAI,SAACC,GAAD,OAAyBA,EAAKC,MAC7CT,gBAAiBM,EAAMI,QAAO,SAACC,EAAUC,GACvC,OAAO,eACFD,EADL,eAEGC,EAAQH,GAAKG,MAEf,MAIP,KAAKlB,EAAkBmB,UAAY,IAAD,EACTT,EAAOP,QAAtBY,EADwB,EACxBA,GAAIK,EADoB,EACpBA,OAEZ,OAAO,eACFX,EADL,CAEEH,gBAAgB,eACXG,EAAMH,gBADI,eAEZS,EAFY,eAGRN,EAAMH,gBAAgBS,GAHd,CAIXK,eAOV,OAAOX,GCjCIY,EAAgBC,IAAMC,cACjC,IAMWC,EAAwB,SAAC,GAMlB,IALlBC,EAKiB,EALjBA,SAKiB,IAJjBC,sBAIiB,MAJA,GAIA,EACXC,EAAsBL,IAAMM,WAAWpB,EAAjB,eACvBH,EADuB,GAEvBqB,IAEL,OACE,kBAACL,EAAcQ,SAAf,CAAwBC,MAAOH,GAC5BF,ICfDM,EAAYC,aAAW,SAAAC,GAAK,MAAK,CACrCC,KAAM,CACJC,MAAO,QACPC,OAAQ,SACRC,WAAY,cAEdC,MAAO,CACLC,OAAQ,QACRH,OAAQ,eAEVhB,OAAQ,CACNoB,QAAS,OACTC,eAAgB,cAIPC,EAAU,SAACC,GAA+B,IAC7CC,EAA4BD,EAA5BC,KAAMxB,EAAsBuB,EAAtBvB,OAAQyB,EAAcF,EAAdE,MAAO9B,EAAO4B,EAAP5B,GADuB,EDKpDO,IAAMwB,WAA+BzB,GCH5B0B,EAF2C,oBAI9CC,EAAUjB,IAEhB,OACE,kBAACkB,EAAA,EAAD,CAAMC,UAAWF,EAAQd,MACvB,kBAACiB,EAAA,EAAD,CACEC,MAAO,CACLb,OAAQ,QAEVc,MAAOT,IAET,kBAACU,EAAA,EAAD,CAAWJ,UAAWF,EAAQV,MAAOO,MAAOA,EAAOQ,MAAOT,IAC1D,kBAACW,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CACEZ,KAAMC,EACNY,KAAK,QACL3B,MAAOV,EACP8B,UAAWF,EAAQ5B,OACnBsC,SAAU,SAACC,EAAOC,GAChBb,EACE,IAAI9C,EACFD,EAAkBmB,UAClB,CAAEJ,KAAIK,OAAM,OAAEwC,QAAF,IAAEA,IAAYxC,W,0CCjC3ByC,EArBF,WACX,OACE,kBAACC,EAAA,EAAD,CACEV,MAAO,CACLW,aAAc,SAGhB,yBACEC,cAAY,WACZd,UAAU,WACVe,IAAI,OACJb,MAAO,CACLb,OAAQ,OACRJ,MAAO,QAET+B,IAAKC,QCOEC,EArBA,WACb,OACE,kBAACN,EAAA,EAAD,CACEV,MAAO,CACLiB,gBAAgB,OAAD,OAASC,IAAT,KACfnC,MAAO,OACPK,QAAS,OACT+B,WAAY,SACZ9B,eAAgB,SAChB+B,cAAe,SACfC,UAAW,OACXC,QAAS,WAGX,kBAAC,EAAD,MACA,kBAACC,EAAA,EAAD,oCACA,kBAACA,EAAA,EAAD,6B,iBCMSC,EAvBA,WACb,OACE,kBAACd,EAAA,EAAD,CACEV,MAAO,CACLsB,QAAS,OACTlC,QAAS,SAGX,kBAAC,IAAMqC,SAAP,KACE,kBAAC,IAAD,CACEzB,MAAO,CACL0B,SAAU,OACVC,YAAa,UAGjB,kBAACJ,EAAA,EAAD,CAAYK,QAAQ,KAAKC,UAAU,MAAnC,iC,0CCHFC,E,WAOJ,aAAuB,yBANhBC,UAAsC,IAAIC,IAC/CC,G,6LAeuBjF,KAAK+E,UAAUrD,M,QAAhCwD,E,QACGC,SAAQ,SAACzE,GAChBA,EAAKM,OAAS,EAAKoE,UAAU,EAAG,MAGlCpF,KAAK+E,UAAUM,KAAKH,G,sIAQJI,EAAaC,GAC7B,OAAOD,EAAME,KAAKC,OAAOF,EAAM,EAAID,GAAOE,KAAKE,a,qCArB/C,OAAO1F,KAAK2F,c,KAVVb,EAKWa,UAAY,IAAIb,EA8BlBA,QAAYc,cCjCNC,G,2MAEnBC,a,IAEAzF,MAAuB,CACrB0F,WAAY,IAAIC,K,mFAGgB,IACvBrD,EADsB,YACV3C,KAAK8F,QADK,MAG/BhB,EAAYC,UACTkB,KAAKC,YAAUlG,KAAKK,MAAM0F,aAC1BI,WAAU,SAAC3F,GACVmC,EACE,IAAI9C,EACFD,EAAkBW,UAClBC,S,6CAORR,KAAKK,MAAM0F,WAAWV,S,wCAGE7E,GACxB,OAAI,OAACA,QAAD,IAACA,OAAD,EAACA,EAAO4F,QAIL5F,EAAM6F,MACX,kBAAWC,EAAX,EAAGtF,OAAH,SAAmCA,OAClBsF,KALV,K,+BASgB,IAAD,cACWtG,KAAK8F,QADhB,MACf3F,EADe,EACfA,IAAKD,EADU,EACVA,gBAERqG,EAAcvG,KAAKwG,kBACvBrG,EAAIM,KAAI,SAACE,GAAD,OAAgBT,EAAgBS,OAG1C,OACE,kBAAC8F,EAAA,EAAD,CAAWC,SAAS,MAClB,kBAAC,EAAD,MACA,kBAAChD,EAAA,EAAD,CACEE,cAAY,YACZZ,MAAO,CACLZ,QAAS,OACTuE,SAAU,OACVtE,eAAgB,WAGjBkE,EAAY9F,KAAI,SAACC,GAAD,OACf,kBAAC,EAAD,iBAAaA,EAAb,CAAmBkG,IAAKlG,EAAKC,UAGjC,kBAAC,EAAD,W,GA5D8BO,IAAM2F,WAAvBhB,GACZiB,YAAc7F,E,4CC4DR8F,G,2MA3Db1G,MAAkB,CAChB2G,eAAgB,IAAIhB,IACpBiB,kBAAkB,G,oFAGQ,IAAD,OACzBjH,KAAKkH,SAAS,CAAED,kBAAkB,IAAQ,WACxCE,aAAS,KACNlB,KACCmB,cAAU,kBAAMD,aAAyB,IAAhB3B,KAAKE,aAC9BQ,YAAU,EAAK7F,MAAM2G,iBAEtBb,WAAU,WACTrB,EAAYuC,kB,oCAKC,IAAD,OAClBrH,KAAKkH,SAAS,CAAED,kBAAkB,IAAS,kBACzC,EAAK5G,MAAM2G,eAAe3B,Y,+BAIP,IAAD,OACdxD,EAAQyF,YAAe,CAC3BC,WAAY,CACVtF,WAAY,WAIVuF,EAAcxH,KAAKK,MAAM4G,iBAC7B,kBAAC,KAAD,CAAYQ,QAAS,kBAAM,EAAKC,iBAEhC,kBAAC,KAAD,CAAeD,QAAS,kBAAM,EAAKE,wBAGrC,OACE,kBAAC,EAAD,KACE,kBAACC,EAAA,EAAD,CAAe/F,MAAOA,GACpB,kBAACgG,EAAA,EAAD,MACA,kBAAC,GAAD,CAAUjE,cAAY,cACtB,kBAACkE,EAAA,EAAD,CACEC,MAAM,UACNC,aAAW,MACXhF,MAAO,CACLiF,SAAU,QACVC,OAAQ,OACRC,MAAO,SAGRX,S,GApDKtG,IAAM2F,WCdxBuB,IAASC,OAAO,kBAAC,GAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.c5e6395b.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/footer.909d5f54.jpg\";","module.exports = __webpack_public_path__ + \"static/media/hexad-small-logo.cf77f030.png\";","import React from 'react';\n\nexport class GlobalContextAction<ActionType, PayloadType> {\n  public type: ActionType;\n  public payload: PayloadType;\n  constructor(type: ActionType, payload: PayloadType) {\n    this.type = type;\n    this.payload = payload;\n  }\n}\n\nexport interface IGame {\n  id: string;\n  name: string;\n  image: string;\n  rating: number;\n}\n\nexport interface IGlobalContext {\n  gamesDictionary: { [key: string]: IGame };\n  ids: string[];\n}\n\n/**\n * Initial state;\n */\nexport const initialState: IGlobalContext = {\n  gamesDictionary: {},\n  ids: []\n};\n\nexport interface RatePayload {\n  id: string;\n  rating: number;\n}\n\nexport type GlobalPayloadType = IGame[] | RatePayload;\n\nexport enum GlobalActionTypes {\n  SET_GAMES = 'SET_GAMES',\n  RATE_GAME = 'RATE_GAME'\n}\n\n/**\n * Type of the useReducer;\n */\nexport type GlobalContextValue = [\n  IGlobalContext,\n  React.Dispatch<GlobalContextAction<GlobalActionTypes, GlobalPayloadType>>\n];\n","import {\n  GlobalActionTypes,\n  GlobalContextAction,\n  GlobalPayloadType,\n  IGame,\n  IGlobalContext,\n  RatePayload\n} from './GlobalContext.models';\n\nexport const reducer = (\n  state: IGlobalContext,\n  action: GlobalContextAction<GlobalActionTypes, GlobalPayloadType>\n): IGlobalContext => {\n  switch (action.type) {\n    case GlobalActionTypes.SET_GAMES: {\n      const games = action.payload as IGame[];\n\n      return {\n        ...state,\n        ids: games.map((game: IGame): string => game.id),\n        gamesDictionary: games.reduce((previous, current: IGame) => {\n          return {\n            ...previous,\n            [current.id]: current\n          };\n        }, {})\n      };\n    }\n\n    case GlobalActionTypes.RATE_GAME: {\n      const { id, rating } = action.payload as RatePayload;\n\n      return {\n        ...state,\n        gamesDictionary: {\n          ...state.gamesDictionary,\n          [id]: {\n            ...state.gamesDictionary[id],\n            rating\n          }\n        }\n      };\n    }\n  }\n\n  return state;\n};\n","import React from 'react';\nimport { reducer } from './GlobalContext.reducer';\nimport {\n  IGlobalContext,\n  initialState,\n  GlobalContextValue\n} from './GlobalContext.models';\n\n/**\n * Initial state to the useReducer.\n */\n\nexport const GlobalContext = React.createContext<GlobalContextValue>(\n  {} as GlobalContextValue\n);\n\n/**\n * @param param0 children.\n */\nexport const GlobalContextProvider = ({\n  children,\n  initialContext = {}\n}: {\n  children: JSX.Element | JSX.Element[];\n  initialContext?: Partial<IGlobalContext>;\n}): JSX.Element => {\n  const initialContextState = React.useReducer(reducer, {\n    ...initialState,\n    ...initialContext\n  });\n  return (\n    <GlobalContext.Provider value={initialContextState}>\n      {children}\n    </GlobalContext.Provider>\n  );\n};\n\nexport const useGlobalContext = (): GlobalContextValue =>\n  React.useContext<GlobalContextValue>(GlobalContext);\n","import {\n  Card,\n  CardContent,\n  CardHeader,\n  CardMedia,\n  makeStyles\n} from '@material-ui/core';\nimport Rating from '@material-ui/lab/Rating';\nimport React from 'react';\nimport {\n  GlobalActionTypes,\n  GlobalContextAction,\n  IGame,\n  useGlobalContext\n} from '../../context';\nimport { RatePayload } from './../../context';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: '18rem',\n    margin: '0.5rem',\n    fontFamily: 'Montserrat'\n  },\n  media: {\n    height: '25rem',\n    margin: '0 -7% 0 -7%'\n  },\n  rating: {\n    display: 'flex',\n    justifyContent: 'center'\n  }\n}));\n\nexport const AppCard = (props: IGame): JSX.Element => {\n  const { name, rating, image, id } = props;\n  const [, dispatch] = useGlobalContext();\n\n  const classes = useStyles();\n\n  return (\n    <Card className={classes.root}>\n      <CardHeader\n        style={{\n          height: '6rem'\n        }}\n        title={name}\n      />\n      <CardMedia className={classes.media} image={image} title={name} />\n      <CardContent>\n        <Rating\n          name={image}\n          size='large'\n          value={rating}\n          className={classes.rating}\n          onChange={(event, newValue) => {\n            dispatch(\n              new GlobalContextAction<GlobalActionTypes, RatePayload>(\n                GlobalActionTypes.RATE_GAME,\n                { id, rating: newValue ?? rating }\n              )\n            );\n          }}\n        />\n      </CardContent>\n    </Card>\n  );\n};\n","import { Box } from '@material-ui/core';\nimport React from 'react';\nimport logo from '../../assets/images/hexad-small-logo.png';\n\nconst Logo = (): JSX.Element => {\n  return (\n    <Box\n      style={{\n        marginBottom: '1rem'\n      }}\n    >\n      <img\n        data-testid='logo-img'\n        className='app-logo'\n        alt='logo'\n        style={{\n          height: '3rem',\n          width: '3rem'\n        }}\n        src={logo}\n      />\n    </Box>\n  );\n};\n\nexport default Logo;\n","import { Box, Typography } from '@material-ui/core';\nimport React from 'react';\nimport footerImage from '../../assets/images/footer.jpg';\nimport { Logo } from '../logo';\n\nconst Footer = (): JSX.Element => {\n  return (\n    <Box\n      style={{\n        backgroundImage: `url(${footerImage})`,\n        width: '100%',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        flexDirection: 'column',\n        marginTop: '1rem',\n        padding: '5rem 0'\n      }}\n    >\n      <Logo />\n      <Typography>Porschestraße 58, 38440,</Typography>\n      <Typography>Wolfsburg, Germany</Typography>\n    </Box>\n  );\n};\n\nexport default Footer;\n","import { Box, Typography } from '@material-ui/core';\nimport { default as SportsEsportsIcon } from '@material-ui/icons/SportsEsports';\nimport React from 'react';\n\nconst Header = (): JSX.Element => {\n  return (\n    <Box\n      style={{\n        padding: '1rem',\n        display: 'flex'\n      }}\n    >\n      <React.Fragment>\n        <SportsEsportsIcon\n          style={{\n            fontSize: '2rem',\n            marginRight: '1rem'\n          }}\n        />\n        <Typography variant='h4' component='h4'>\n          Rating Games Assignment ;)\n        </Typography>\n      </React.Fragment>\n    </Box>\n  );\n};\n\nexport default Header;\n","import { BehaviorSubject } from 'rxjs';\nimport { IGame } from '../context';\nimport initialGameList from '../mock_data/game_list.json';\n\ninterface IGameService {\n  /**\n   * The game list behaviourSubject.\n   */\n  gameList$: BehaviorSubject<IGame[]>;\n\n  /**\n   * Shuffles the games list changing the rating randonly.\n   */\n  shuffle(): Promise<void>;\n}\n\nclass GameService implements IGameService {\n  public gameList$: BehaviorSubject<IGame[]> = new BehaviorSubject<IGame[]>(\n    initialGameList\n  );\n\n  private static _instance = new GameService();\n\n  private constructor() {}\n\n  public static getInstance(): IGameService {\n    return this._instance;\n  }\n\n  /**\n   * @inheritdoc\n   */\n  async shuffle(): Promise<void> {\n    const gameList = await this.gameList$.value;\n    gameList.forEach((game: IGame) => {\n      game.rating = this.randomInt(1, 5);\n    });\n\n    this.gameList$.next(gameList);\n  }\n\n  /**\n   * Generate a random int between {min} and {max}.\n   * @param min lower limit.\n   * @param max  higher limit.\n   */\n  private randomInt(min: number, max: number) {\n    return min + Math.floor((max + 1 - min) * Math.random());\n  }\n}\n\nexport default GameService.getInstance();\n","import { Box } from '@material-ui/core';\nimport Container from '@material-ui/core/Container';\nimport React from 'react';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { AppCard, Footer, Header } from '../components';\nimport {\n  GlobalActionTypes,\n  GlobalContext,\n  GlobalContextAction,\n  IGame\n} from '../context';\nimport { GameService } from '../service';\n\ninterface MainPageState {\n  onDestroy$: Subject<void>;\n}\n\nexport default class MainPage extends React.Component<{}, MainPageState> {\n  static contextType = GlobalContext;\n  context!: React.ContextType<typeof GlobalContext>;\n\n  state: MainPageState = {\n    onDestroy$: new Subject<void>()\n  };\n\n  public componentDidMount(): void {\n    const [, dispatch] = this.context;\n\n    GameService.gameList$\n      .pipe(takeUntil(this.state.onDestroy$))\n      .subscribe((games: IGame[]): void => {\n        dispatch(\n          new GlobalContextAction<GlobalActionTypes, IGame[]>(\n            GlobalActionTypes.SET_GAMES,\n            games\n          )\n        );\n      });\n  }\n\n  public componentWillUnmount(): void {\n    this.state.onDestroy$.next();\n  }\n\n  private sortGamesByRating(games: IGame[]): IGame[] {\n    if (!games?.length) {\n      return [];\n    }\n\n    return games.sort(\n      ({ rating: firstRating }: IGame, { rating: secondRating }: IGame) =>\n        secondRating - firstRating\n    );\n  }\n\n  render(): React.ReactNode {\n    const [{ ids, gamesDictionary }] = this.context;\n\n    const sortedGames = this.sortGamesByRating(\n      ids.map((id: string) => gamesDictionary[id])\n    );\n\n    return (\n      <Container maxWidth='xl'>\n        <Header />\n        <Box\n          data-testid='page-body'\n          style={{\n            display: 'flex',\n            flexWrap: 'wrap',\n            justifyContent: 'center'\n          }}\n        >\n          {sortedGames.map((game: IGame) => (\n            <AppCard {...game} key={game.id} />\n          ))}\n        </Box>\n        <Footer />\n      </Container>\n    );\n  }\n}\n","import {\n  createMuiTheme,\n  CssBaseline,\n  ThemeProvider,\n  Fab\n} from '@material-ui/core';\nimport React from 'react';\nimport { MainPage } from './containers';\nimport { GlobalContextProvider } from './context';\nimport * as Icons from '@material-ui/icons';\nimport { GameService } from './service';\nimport { Subject, interval } from 'rxjs';\nimport { delayWhen, takeUntil } from 'rxjs/operators';\n\ninterface AppState {\n  suffleSubject$: Subject<void>;\n  shuffleActivated: boolean;\n}\n\nclass App extends React.Component<{}, AppState> {\n  state: AppState = {\n    suffleSubject$: new Subject<void>(),\n    shuffleActivated: false\n  };\n\n  startRandomShuffle(): void {\n    this.setState({ shuffleActivated: true }, () => {\n      interval(1000)\n        .pipe(\n          delayWhen(() => interval(Math.random() * 5000)),\n          takeUntil(this.state.suffleSubject$)\n        )\n        .subscribe(() => {\n          GameService.shuffle();\n        });\n    });\n  }\n\n  stopShuffle(): void {\n    this.setState({ shuffleActivated: false }, () =>\n      this.state.suffleSubject$.next()\n    );\n  }\n\n  render(): JSX.Element {\n    const theme = createMuiTheme({\n      typography: {\n        fontFamily: 'Dosis'\n      }\n    });\n\n    const CurrentIcon = this.state.shuffleActivated ? (\n      <Icons.Stop onClick={() => this.stopShuffle()} />\n    ) : (\n      <Icons.Shuffle onClick={() => this.startRandomShuffle()} />\n    );\n\n    return (\n      <GlobalContextProvider>\n        <ThemeProvider theme={theme}>\n          <CssBaseline />\n          <MainPage data-testid='main-page' />\n          <Fab\n            color='primary'\n            aria-label='add'\n            style={{\n              position: 'fixed',\n              bottom: '2rem',\n              right: '2rem'\n            }}\n          >\n            {CurrentIcon}\n          </Fab>\n        </ThemeProvider>\n      </GlobalContextProvider>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}